/*! For license information please see module.js.LICENSE.txt */
define(["@grafana/data","@grafana/runtime","@grafana/ui","lodash","react"],((t,e,n,r,o)=>(()=>{var i=[t=>{"use strict";t.exports=o},t=>{"use strict";t.exports=n},e=>{"use strict";e.exports=t},t=>{"use strict";var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var i={},a=[],c=0;c<t.length;c++){var l=t[c],s=r.base?l[0]+r.base:l[0],u=i[s]||0,f="".concat(s," ").concat(u);i[s]=u+1;var p=n(f),d={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)e[p].references++,e[p].updater(d);else{var h=o(d,r);r.byIndex=c,e.splice(c,0,{identifier:f,updater:h,references:1})}a.push(f)}return a}function o(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var i=r(t=t||[],o=o||{});return function(t){t=t||[];for(var a=0;a<i.length;a++){var c=n(i[a]);e[c].references--}for(var l=r(t,o),s=0;s<i.length;s++){var u=n(i[s]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}i=l}}},t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},t=>{"use strict";var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},(t,e,n)=>{"use strict";n.d(e,{Z:()=>g});var r=n(10),o=n.n(r),i=n(11),a=n.n(i),c=n(12),l=n.n(c),s=new URL(n(15),n.b),u=new URL(n(16),n.b),f=new URL(n(17),n.b),p=new URL(n(18),n.b),d=a()(o()),h=l()(s),m=l()(u),y=l()(f),v=l()(p);d.push([t.id,'@font-face{font-family:"Open Sans";src:url('+h+') format("woff2");font-weight:300;font-style:normal;font-display:swap}@font-face{font-family:"Open Sans";src:url('+m+') format("woff2");font-weight:normal;font-style:normal;font-display:swap}@font-face{font-family:"Open Sans";src:url('+y+') format("woff2");font-weight:600;font-style:normal;font-display:swap}@font-face{font-family:"Open Sans";src:url('+v+') format("woff2");font-weight:bold;font-style:normal;font-display:swap}',"",{version:3,sources:["webpack://./fonts.scss"],names:[],mappings:"AAAA,WACE,uBAAA,CACA,2DAAA,CACA,eAAA,CACA,iBAAA,CACA,iBAAA,CAGF,WACE,uBAAA,CACA,2DAAA,CACA,kBAAA,CACA,iBAAA,CACA,iBAAA,CAGF,WACE,uBAAA,CACA,2DAAA,CACA,eAAA,CACA,iBAAA,CACA,iBAAA,CAGF,WACE,uBAAA,CACA,2DAAA,CACA,gBAAA,CACA,iBAAA,CACA,iBAAA",sourcesContent:["@font-face {\n  font-family: 'Open Sans';\n  src: url('fonts/OpenSans-Light.woff2') format('woff2');\n  font-weight: 300;\n  font-style: normal;\n  font-display: swap;\n}\n\n@font-face {\n  font-family: 'Open Sans';\n  src: url('fonts/OpenSans-Regular.woff2') format('woff2');\n  font-weight: normal;\n  font-style: normal;\n  font-display: swap;\n}\n\n@font-face {\n  font-family: 'Open Sans';\n  src: url('fonts/OpenSans-SemiBold.woff2') format('woff2');\n  font-weight: 600;\n  font-style: normal;\n  font-display: swap;\n}\n\n@font-face {\n  font-family: 'Open Sans';\n  src: url('fonts/OpenSans-Bold.woff2') format('woff2');\n  font-weight: bold;\n  font-style: normal;\n  font-display: swap;\n}\n"],sourceRoot:""}]);const g=d},t=>{"use strict";t.exports=function(t){var e=t[1],n=t[3];if(!n)return e;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),i="/*# ".concat(o," */"),a=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[e].concat(a).concat([i]).join("\n")}return[e].join("\n")}},t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,o,i){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var c=0;c<this.length;c++){var l=this[c][0];null!=l&&(a[l]=!0)}for(var s=0;s<t.length;s++){var u=[].concat(t[s]);r&&a[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),e.push(u))}},e}},t=>{"use strict";t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},,t=>{"use strict";t.exports=e},t=>{"use strict";t.exports="public/plugins/gapit-htmlgraphics-panel/fonts/1f45c30d2fb99f9a22fd.woff2"},t=>{"use strict";t.exports="public/plugins/gapit-htmlgraphics-panel/fonts/403af3bc2c6126fb5cef.woff2"},t=>{"use strict";t.exports="public/plugins/gapit-htmlgraphics-panel/fonts/e24264613d8bf484c0aa.woff2"},t=>{"use strict";t.exports="public/plugins/gapit-htmlgraphics-panel/fonts/b87be75f5095e2b4ffe9.woff2"},t=>{"use strict";t.exports=r},(t,e,n)=>{var r={"./@grafana/data.d.ts":21,"./@grafana/runtime.d.ts":22,"./global.d.ts":23,"./index.d.ts":24};function o(t){var e=i(t);return n(e)}function i(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}o.keys=function(){return Object.keys(r)},o.resolve=i,t.exports=o,o.id=20},t=>{"use strict";t.exports="public/plugins/gapit-htmlgraphics-panel/declarations/3ecb755f0ddd916b83f2.d.ts"},t=>{"use strict";t.exports="public/plugins/gapit-htmlgraphics-panel/declarations/c84c03169c83582b8d39.d.ts"},t=>{"use strict";t.exports="public/plugins/gapit-htmlgraphics-panel/declarations/1e2aea9e896517516cd6.d.ts"},t=>{"use strict";t.exports="public/plugins/gapit-htmlgraphics-panel/declarations/bd1ee11311ca67e59622.d.ts"}],a={};function c(t){var e=a[t];if(void 0!==e)return e.exports;var n=a[t]={id:t,exports:{}};return i[t](n,n.exports,c),n.exports}c.m=i,c.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return c.d(e,{a:e}),e},c.d=(t,e)=>{for(var n in e)c.o(e,n)&&!c.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},c.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),c.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.b=document.baseURI||self.location.href,c.nc=void 0;var l={};return(()=>{"use strict";c.r(l),c.d(l,{plugin:()=>_t});var t,e,n=c(2);!function(t){t.All="all",t.Standard="standard",t.Custom="custom",t.None="none"}(t||(t={})),function(t){t.Javascript="javascript",t.Html="html",t.Json="json",t.Css="css"}(e||(e={}));var r=c(0),o=c.n(r),i=c(14),a=c(3),s=c.n(a),u=c(4),f=c.n(u),p=c(5),d=c.n(p),h=c(6),m=c.n(h),y=c(7),v=c.n(y),g=c(8),w=c.n(g),b=c(9),E={};E.styleTagTransform=w(),E.setAttributes=m(),E.insert=d().bind(null,"head"),E.domAPI=f(),E.insertStyleElement=v();s()(b.Z,E);b.Z&&b.Z.locals&&b.Z.locals;function x(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.namespace,r=void 0===n?"JSON":n,o=e.logError,i=void 0===o||o;if(t)try{return{json:JSON.parse(t),isError:!1}}catch(t){return i&&console.error("".concat(r,":"),t),{json:null,isError:!0,error:t}}return{json:null,isError:!1}}var S=c(19),A=c.n(S),C=c(1);function O(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,c=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return L(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var j=function(t){var e=t.errors;return o().createElement("div",null,Object.entries(e).filter((function(t){return""!==O(t,2)[1]})).map((function(t){var e=O(t,2),n=e[0],r=e[1];return o().createElement(C.Alert,{key:n,title:"Error executing ".concat(n)},r)})))};function D(t){t.onpanelupdate=function(){},t.onpanelwillunmount=function(){}}function R(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.centerAlignContent,n=void 0!==e&&e,r=document.createElement("div");return r.attachShadow({mode:"open"}),r.style.width="100%",r.style.height="100%",r.style.position="absolute",n&&(r.style.display="flex",r.style.justifyContent="center",r.style.alignItems="center"),r}var P=new CustomEvent("panelupdate");function I(t){var e=null==t?void 0:t.shadowRoot;e&&e.onpanelupdate&&(e.onpanelupdate(),e.dispatchEvent(P))}var k=new CustomEvent("panelwillunmount");function V(t,e){var n,r,o,i=null==t||null===(n=t.firstElementChild)||void 0===n?void 0:n.shadowRoot,a={scope:"html",isError:!1};if(t&&i)try{var c=e.SVGBaseFix&&e.html?(r=e.html,o=window.location.href.replace(window.location.hash,""),r.replace(/(xlink:href=")(#[^"]*)/g,"$1".concat(o,"$2"))):e.html,l=e.css,s=e.rootCSS,u=document.createElement("style");u.textContent=null!=s?s:"",t.appendChild(u),i.innerHTML="<style>".concat(null!=l?l:"","</style>").concat(null!=c?c:"<div></div>");var f=i.children[1];e.overflow&&f&&(f.style.overflow=e.overflow),e.add100Percentage&&f&&(f.setAttribute("height","100%"),f.setAttribute("width","100%"),f.style.height="100%",f.style.width="100%")}catch(t){a.isError=!0,a.error=t,console.error("htmlNode:",t)}return a}function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function G(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return _(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function F(){return F=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},F.apply(this,arguments)}function N(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function M(t,e){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},M(t,e)}function U(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=z(t);if(e){var o=z(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return H(this,n)}}function H(t,e){if(e&&("object"===T(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return J(t)}function J(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function z(t){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},z(t)}function K(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Z=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M(t,e)}(s,e);var r,a,c,l=U(s);function s(){var e;N(this,s);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return K(J(e=l.call.apply(l,[this].concat(a))),"state",{shadowContainerRef:o().createRef(),errors:{},options:F({},e.props.options)}),K(J(e),"errors",{}),K(J(e),"defaultErrorMessage","Check console for more info (ctrl+shift+j)"),K(J(e),"data",e.props.data),K(J(e),"dynamicProps",e.props),K(J(e),"fieldDisplayValues",[]),K(J(e),"panelSize",{height:e.props.height,width:e.props.width}),K(J(e),"shadowElt",null),K(J(e),"htmlGraphics",null),K(J(e),"populatedGetFieldDisplayValues",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.series,o=void 0===r?e.props.data.series:r,a=t.fieldConfig,c=void 0===a?e.props.fieldConfig:a,l=t.reduceOptions,s=void 0===l?e.props.options.reduceOptions:l,u=t.replaceVariables,f=void 0===u?e.props.replaceVariables:u,p=t.theme,d=void 0===p?i.config.theme2:p,h=t.sparkline,m=t.timeZone;return(0,n.getFieldDisplayValues)({data:o,fieldConfig:c,reduceOptions:s,replaceVariables:f,theme:d,sparkline:h,timeZone:m})})),K(J(e),"updateFieldDisplayValues",(function(){var n;e.props.options.calcsMutation!==t.None?(e.fieldDisplayValues.splice(0,e.fieldDisplayValues.length),(n=e.fieldDisplayValues).push.apply(n,G(e.populatedGetFieldDisplayValues()))):e.fieldDisplayValues.splice(0,e.fieldDisplayValues.length)})),K(J(e),"updateDynamicReferences",(function(){var t=e.props.options,n=t.dynamicData,r=t.dynamicFieldDisplayValues,o=t.dynamicProps,i=t.dynamicHtmlGraphics;n&&Object.assign(e.data,e.props.data),o&&Object.assign(e.dynamicProps,e.props),i&&e.htmlGraphics&&Object.assign(e.htmlGraphics,e.getHtmlGraphics({dynamicData:n,dynamicFieldDisplayValues:r,dynamicProps:o}))})),e}return r=s,a=[{key:"getHtmlGraphics",value:function(){var t,e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.dynamicData,a=void 0!==o&&o,c=r.dynamicFieldDisplayValues,l=void 0!==c&&c,s=r.dynamicProps,u=void 0!==s&&s,f=a?this.data:F({},this.props.data),p=u?this.dynamicProps:F({},this.props),d=l?this.fieldDisplayValues:F({},this.fieldDisplayValues),h=null===(t=this.state.shadowContainerRef.current)||void 0===t||null===(e=t.firstElementChild)||void 0===e?void 0:e.shadowRoot,m=this.getCodeData(),y=this.props,v=y.options,g=y.width,w=y.height,b=i.config.theme,E=i.config.theme2;return{htmlNode:h,data:f,customProperties:m,codeData:m,options:v,theme:b,theme2:E,getTemplateSrv:i.getTemplateSrv,getLocationSrv:i.getLocationSrv,locationService:i.locationService,props:p,width:g,height:w,getFieldDisplayValues:this.populatedGetFieldDisplayValues,fieldDisplayValues:d,fieldReducers:n.fieldReducers}}},{key:"onInitOnResize",value:function(){!this.props.options.onInitOnResize||this.panelSize.height===this.props.height&&this.panelSize.width===this.props.width||(this.onInit(),this.panelSize.height=this.props.height,this.panelSize.width=this.props.width)}},{key:"getCodeData",value:function(){var t=x(this.props.options.codeData,{namespace:"codeData"}),e=t.json,n=t.isError,r=t.error;return this.updateError({scope:"codeData",isError:n,error:r}),null!=e?e:{}}},{key:"executeScript",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.dynamicData,r=void 0!==n&&n,o=e.dynamicFieldDisplayValues,a=void 0!==o&&o,c=e.dynamicProps,l=void 0!==c&&c,s=e.dynamicHtmlGraphics,u=void 0!==s&&s,f=this.getHtmlGraphics({dynamicData:r,dynamicFieldDisplayValues:a,dynamicProps:l}),p=f.htmlNode,d=f.data,h=f.codeData,m=f.options,y=f.theme;u&&(this.htmlGraphics=f);var v=u?this.htmlGraphics:f,g=new Function("htmlNode","data","customProperties","codeData","options","theme","getTemplateSrv","getLocationSrv","htmlGraphics",t);g(p,d,h,h,m,y,i.getTemplateSrv,i.getLocationSrv,v)}},{key:"onRender",value:function(){var t={scope:"onRender",isError:!1},e=this.props.options.onRender;if(e)try{this.executeScript(e)}catch(e){t.isError=!0,t.error=e,console.error("onRender:",e)}this.updateError(t)}},{key:"onInit",value:function(){var t={scope:"onInit",isError:!1},e=this.props.options,n=e.onInit,r=e.dynamicData,o=e.dynamicFieldDisplayValues,i=e.dynamicProps,a=e.dynamicHtmlGraphics;if(n)try{this.executeScript(n,{dynamicData:r,dynamicFieldDisplayValues:o,dynamicProps:i,dynamicHtmlGraphics:a})}catch(e){t.isError=!0,t.error=e,console.error("onInit:",e)}this.updateError(t)}},{key:"initialize",value:function(){this.shadowElt=function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).centerAlignContent,n=void 0!==e&&e;if(!t)return null;for(;t.firstChild;)t.firstChild.remove();var r=R({centerAlignContent:n});return t.appendChild(r),D(r.shadowRoot),r}(this.state.shadowContainerRef.current,{centerAlignContent:this.props.options.centerAlignContent}),this.updateError(V(this.state.shadowContainerRef.current,this.props.options)),this.onInit()}},{key:"componentDidMount",value:function(){this.updateFieldDisplayValues(),this.initialize(),this.props.options.renderOnMount&&this.onRender(),this.props.options.panelupdateOnMount&&I(this.shadowElt),A().isEqual(this.state.errors,this.errors)||this.setState({errors:F({},this.errors)})}},{key:"componentDidUpdate",value:function(){this.updateFieldDisplayValues(),this.updateDynamicReferences(),A().isEqual(this.state.options,this.props.options)?(this.onInitOnResize(),I(this.shadowElt),this.onRender(),A().isEqual(this.state.errors,this.errors)||this.setState({errors:F({},this.errors)})):(this.initialize(),this.setState({options:F({},this.props.options)}))}},{key:"componentWillUnmount",value:function(){var t,e;t=this.shadowElt,(e=null==t?void 0:t.shadowRoot)&&e.onpanelwillunmount&&(e.onpanelwillunmount(),e.dispatchEvent(k))}},{key:"updateError",value:function(t){var e=t.scope,n=t.isError,r=t.error;if(!n&&this.state.errors[e])delete this.errors[e];else{var o=r instanceof Error?r.message:this.defaultErrorMessage;n&&this.errors[e]!==o&&(this.errors=F({},this.errors,K({},e,o)))}}},{key:"render",value:function(){var t=this.props,e=t.width,n=t.height,r=t.options,i=r.useGrafanaScrollbar,a=r.overflow;return o().createElement(o().Fragment,null,o().createElement("div",{style:{position:"absolute",width:"".concat(e,"px"),height:"".concat(n,"px")}},i&&"visible"===a?o().createElement(C.CustomScrollbar,{autoHeightMin:"100%"},o().createElement("div",{ref:this.state.shadowContainerRef})):o().createElement("div",{ref:this.state.shadowContainerRef})),o().createElement(j,{errors:this.state.errors}))}}],a&&B(r.prototype,a),c&&B(r,c),Object.defineProperty(r,"prototype",{writable:!1}),s}(r.PureComponent);function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function Y(){Y=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return C()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=b(a,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,a),i}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function f(){}function p(){}function d(){}var h={};c(h,o,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(A([])));y&&y!==e&&n.call(y,o)&&(h=y);var v=d.prototype=f.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function r(o,i,a,c){var l=s(t[o],t,i);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==$(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(l.arg)}var o;this._invoke=function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,u;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function A(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=d,c(v,"constructor",d),c(d,"constructor",p),p.displayName=c(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},g(w.prototype),c(w.prototype,i,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new w(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=A,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:A(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},t}function q(t,e,n,r,o,i,a){try{var c=t[i](a),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(r,o)}function W(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,c=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Q(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var X,tt,et,nt=function(t){var e,n=t.settings,i=t.value,a=(t.context,t.onChange),l=W((0,r.useState)(),2),s=l[0],u=l[1],f=function(){var t,e=(t=Y().mark((function t(e,n){return Y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s&&n.languages.typescript.javascriptDefaults.setExtraLibs(s);case 1:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){q(i,r,o,a,c,"next",t)}function c(t){q(i,r,o,a,c,"throw",t)}a(void 0)}))});return function(t,n){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){if(null!=n&&n.useHtmlGraphicsDeclarations){var t=c(20);Promise.all(t.keys().map((function(e){return fetch(t(e))}))).then((function(t){return Promise.all(t.map((function(t){return t.text()})))})).then((function(e){return u(t.keys().map((function(t,n){return{filePath:t.substring(2),content:e[n]}})))}))}}),[null==n?void 0:n.useHtmlGraphicsDeclarations]),o().createElement("div",null,null==n||!n.useHtmlGraphicsDeclarations||s?o().createElement(C.CodeEditor,{height:"33vh",value:null!=i?i:"",language:null!==(e=null==n?void 0:n.language)&&void 0!==e?e:"",showLineNumbers:!0,onEditorDidMount:f,onSave:a,onBlur:a,monacoOptions:{contextmenu:!0}}):o().createElement("div",{style:{height:"33vh"}},"Loading declarations..."))};var rt,ot,it,at=function(t){var e=t.dict,n=t.update,r=t.itemKey;return o().createElement(C.Switch,{value:e[r],onChange:function(){e[r]=!e[r],n()}})},ct=function(t){var e=t.dict,n=t.update,r=t.itemKey;return o().createElement(C.Input,{value:e[r],onChange:function(t){e[r]=parseFloat(t.currentTarget.value)||0,n()},type:"number"})},lt=function(t){var e=t.dict,n=t.update,r=t.itemKey;return o().createElement(C.Input,{value:e[r],onChange:function(t){e[r]=t.currentTarget.value||"",n()},type:"string"})},st=function(t){var e=t.dict,n=t.update,r=t.itemKey;return o().createElement(C.ControlledCollapse,{collapsible:!0,label:"Click to toggle (items: ".concat(e[r].length,")")},e[r].map((function(t,i){return o().createElement(ft,{key:"".concat(r,"-").concat(i),dict:e[r],update:n,itemKey:i})})))},ut=function(t){var e=t.dict,n=t.update,r=t.itemKey;return o().createElement(C.ControlledCollapse,{collapsible:!0,label:"Click to toggle (items: ".concat(Object.keys(e[r]).length,")")},o().createElement(pt,{dict:e[r],update:n}))},ft=function(t){var e=t.dict,n=t.update,r=t.itemKey,i={dict:e,update:n,itemKey:r},a=function(t){return Object.prototype.toString.call(t).slice(8,-1)}(e[r]),c={Null:X||(X=o().createElement("p",null,"Value is null")),Boolean:o().createElement(at,i),Number:o().createElement(ct,i),String:o().createElement(lt,i),Array:o().createElement(st,i),Object:o().createElement(ut,i)};return a in c?c[a]:tt||(tt=o().createElement("p",null,"Type not implemented"))},pt=function(t){var e=t.dict,n=t.update;return o().createElement(o().Fragment,null,Object.keys(e).map((function(t,r){return o().createElement("div",{key:"".concat(t,"-").concat(r)},o().createElement(C.Label,null,t),o().createElement(ft,{dict:e,update:n,itemKey:t}),Object.keys(e).length>r+1?et||(et=o().createElement("br",null)):null)})))};function dt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,c=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ht(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ht(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var mt,yt,vt,gt=function(t){var e=t.value,n=t.onChange;if(e){var r=x(e,{namespace:"codeData"}).json;return o().createElement("div",null,o().createElement(pt,{dict:null!=r?r:{},update:function(){return n(JSON.stringify(r,null,2))}}))}return o().createElement(o().Fragment,null)},wt=function(t){var e=t.value,n=t.item,i=t.onChange,a=t.context,c=dt((0,r.useState)(!1),2),l=c[0],s=c[1];return o().createElement("div",null,rt||(rt=o().createElement("br",null)),ot||(ot=o().createElement(C.Label,null,"Edit as JSON")),o().createElement(C.Switch,{value:l,onChange:function(){return s(!l)}}),it||(it=o().createElement("br",null)),l?o().createElement(nt,{settings:n.settings,value:e,context:a,onChange:function(t){return i(t)}}):o().createElement(gt,{value:e,onChange:i}))},bt=function(t){var e=t.value,n=t.item,r=t.context,i=t.onChange;return o().createElement(nt,{settings:n.settings,value:e,context:r,onChange:function(t){return i(t)}})};function Et(t){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Et(t)}function xt(){xt=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return C()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=b(a,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,a),i}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function f(){}function p(){}function d(){}var h={};c(h,o,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(A([])));y&&y!==e&&n.call(y,o)&&(h=y);var v=d.prototype=f.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function r(o,i,a,c){var l=s(t[o],t,i);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==Et(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(l.arg)}var o;this._invoke=function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,u;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function A(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=d,c(v,"constructor",d),c(d,"constructor",p),p.displayName=c(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},g(w.prototype),c(w.prototype,i,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new w(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=A,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:A(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},t}function St(t,e,n,r,o,i,a){try{var c=t[i](a),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(r,o)}function At(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){St(i,r,o,a,c,"next",t)}function c(t){St(i,r,o,a,c,"throw",t)}a(void 0)}))}}function Ct(t){return Ot.apply(this,arguments)}function Ot(){return(Ot=At(xt().mark((function t(e){var n;return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Response(e).text();case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Lt(t){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lt(t)}function jt(){jt=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return C()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=b(a,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,a),i}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function f(){}function p(){}function d(){}var h={};c(h,o,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(A([])));y&&y!==e&&n.call(y,o)&&(h=y);var v=d.prototype=f.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function r(o,i,a,c){var l=s(t[o],t,i);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==Lt(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(l.arg)}var o;this._invoke=function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,u;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function A(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=d,c(v,"constructor",d),c(d,"constructor",p),p.displayName=c(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},g(w.prototype),c(w.prototype,i,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new w(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=A,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:A(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},t}function Dt(t,e,n,r,o,i,a){try{var c=t[i](a),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(r,o)}function Rt(){return Rt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rt.apply(this,arguments)}function Pt(t){t?function(t,e,n){var r=document.createElement("a");r.download=e,r.href="data:"+n+","+encodeURIComponent(t),r.target="_blank",document.body.appendChild(r),r.click(),document.body.removeChild(r)}(t,"panel-options.json",mt.json):console.warn("Panel options is empty. Failed download.")}!function(t){t.json="application/json;charset=utf-8;"}(mt||(mt={}));var It=function(){return o().createElement("div",{style:{marginBottom:"6px"}})},kt=function(t){t.value;var e=t.item,n=t.onChange,r=t.context,i=function(){if(r.options){var t=Rt({},r.options);return delete t.importedPanelOptions,JSON.stringify(t,null,4)}},a=function(t){t&&Object.assign(r.options,JSON.parse(t)),n()},c=function(){var t,e=(t=jt().mark((function t(e){var n,r;return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e?e.item(0):null)){t.next=6;break}return t.next=4,Ct(n);case 4:r=t.sent,a(r);case 6:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Dt(i,r,o,a,c,"next",t)}function c(t){Dt(i,r,o,a,c,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}();return o().createElement("div",null,o().createElement(C.Input,{type:"file",onChange:function(t){return c(t.currentTarget.files)}}),yt||(yt=o().createElement(It,null)),o().createElement(nt,{settings:e.settings,value:i(),context:r,onChange:a}),vt||(vt=o().createElement(It,null)),o().createElement(C.Button,{onClick:function(){return Pt(i())}},"Download as JSON file"))},Vt=function(e){var r,i=e.value,a=(e.item,e.onChange),c=(null===(r=e.context.options)||void 0===r?void 0:r.calcsMutation)===t.Custom,l=(c?n.fieldReducers.list().filter((function(t){return t.reduce})):n.fieldReducers.list()).map((function(t){return{value:t.id,label:t.name,description:t.description}}));return o().createElement(C.MultiSelect,{value:i,onChange:function(t){c&&a(t.map((function(t){var e;return null!==(e=t.value)&&void 0!==e?e:""})))},options:l,disabled:!c})},Tt=[{value:t.None,label:"No mutation",getReducerIDs:function(){return[]}},{value:t.Custom,label:"Custom",getReducerIDs:function(){return[n.ReducerID.last]}},{value:t.Standard,label:"Standard calcs",getFieldReducerList:function(){return n.fieldReducers.list().filter((function(t){return t.standard}))},getReducerIDs:function(){return this.getFieldReducerList().map((function(t){return t.id}))}},{value:t.All,label:"All calcs",getFieldReducerList:function(){return n.fieldReducers.list()},getReducerIDs:function(){return this.getFieldReducerList().map((function(t){return t.id}))}}],Gt=function(t){var e=t.value,n=(t.item,t.onChange),r=t.context,i=Tt.map((function(t){return{value:t.value,label:t.label}}));return o().createElement(C.RadioButtonGroup,{value:e,onChange:function(t){var e,o;r.options&&(r.options.reduceOptions.calcs=null!==(e=null===(o=Tt.find((function(e){return e.value===t})))||void 0===o?void 0:o.getReducerIDs())&&void 0!==e?e:[],n(t))},options:i})},_t=new n.PanelPlugin(Z).useFieldConfig().setPanelOptions((function(n){var r,o;return n.addCustomEditor({id:"calcsMutation",path:"calcsMutation",name:"Mutate calcs",description:"Mutate the calcs object and returned values from fieldDisplayValues. Useful when getting metric values. This doesn't remove existing calcs. Adding two or more calcs adds the standard calcs to the calcs object. OBS! Some changes might require a page reload.",category:["Value options"],editor:Gt,defaultValue:t.Standard}).addCustomEditor({id:"reduceOptions.calcs",path:"reduceOptions.calcs",name:"Calcs",description:"Reducer functions (calcs) to be added to the calcs object.",category:["Value options"],editor:Vt,defaultValue:null!==(r=null===(o=Tt.find((function(e){return e.value===t.Standard})))||void 0===o?void 0:o.getReducerIDs())&&void 0!==r?r:[],showIf:function(e){return e.calcsMutation!==t.None}}).addBooleanSwitch({path:"add100Percentage",name:"Fit content to panel",description:"Adds 100% height and width attribute to the first element in the HTML/SVG code.",defaultValue:!0}).addBooleanSwitch({path:"centerAlignContent",name:"Center align content",description:"Vertically and horizontally aligns the content to the center.",defaultValue:!0}).addRadio({path:"overflow",name:"Overflow",description:'Chooses what happens if content overflows outside the panel. "Fit content to panel" is recommended to turn on with some of these options.',settings:{options:[{label:"Visible",value:"visible"},{label:"Auto",value:"auto"},{label:"Scroll",value:"scroll"},{label:"Hidden",value:"hidden"}]},defaultValue:"visible"}).addBooleanSwitch({path:"useGrafanaScrollbar",name:"Use Grafana scrollbar",description:"",defaultValue:!0,showIf:function(t){return"visible"===t.overflow}}).addBooleanSwitch({path:"SVGBaseFix",name:"SVG base fix",description:"Fixes an issue in Firefox where xlink:href needs the url to be able to find the link",defaultValue:!0,category:["Polyfill"]}).addCustomEditor({id:"codeData",path:"codeData",name:"Custom properties",description:"CustomProperties (codeData) which can be accessed by onInit and onRender",editor:wt,category:["Custom properties"],defaultValue:'{\n  "text": "Random text"\n}',settings:{language:e.Json}}).addCustomEditor({id:"rootCSS",path:"rootCSS",name:"Root CSS",description:"CSS that's loaded outside the shadow root. Useful for font faces and imports.",editor:bt,defaultValue:"",settings:{language:e.Css}}).addCustomEditor({id:"css",path:"css",name:"CSS",description:"",editor:bt,defaultValue:"* {\n  font-family: Open Sans;\n}\n\n.box {\n  border: solid #555 2px;\n  border-radius: 10px;\n  padding: 10px 20px;\n}\n",settings:{language:e.Css}}).addCustomEditor({id:"html",path:"html",name:"HTML/SVG document",description:"\n        This is the htmlNode (can be HTML and/or SVG).\n        It is recommended to write your code in an editor and paste the code here.\n        This is to keep a copy of the code and not lose your work if the browser crashes.\n    ",editor:bt,defaultValue:'<div style="text-align: center;">\n  <div class="box" id="htmlgraphics-text"></div>\n  <br />\n  <div class="box" id="htmlgraphics-value"></div>\n</div>\n',settings:{language:e.Html}}).addBooleanSwitch({path:"renderOnMount",name:"Run onRender when mounted",description:"Run onRender when the panel is first loaded (in most cases, this should be true)",defaultValue:!0}).addCustomEditor({id:"onRender",path:"onRender",name:"onRender",description:"The onRender code is executed whenever new data is available (htmlNode, customProperties/codeData, data, options, theme, getTemplateSrv, getLocationSrv, htmlGraphics)",editor:bt,defaultValue:"// Sets the value from the first series on every refresh\nconst htmlgraphicsValue = htmlNode.getElementById('htmlgraphics-value');\n\nif (htmlgraphicsValue) {\n  const valueField = data.series[0]?.fields[1];\n  if (valueField) {\n    const length = valueField.values.length;\n    htmlgraphicsValue.textContent = valueField.values.get(length - 1);\n  } else {\n    htmlgraphicsValue.textContent = \"No data\"\n  }\n}\n",settings:{language:e.Javascript}}).addBooleanSwitch({path:"panelupdateOnMount",name:"Trigger panelupdate when mounted",description:"Trigger the panelupdate event (htmlNode.onpanelupdate) when the panel is first loaded (in most cases, this should be true)",defaultValue:!0}).addBooleanSwitch({path:"dynamicHtmlGraphics",name:"Dynamic htmlGraphics (onInit)",description:"Update the onInit htmlGraphics object when new data is available.",defaultValue:!1}).addBooleanSwitch({path:"dynamicData",name:"Dynamic data object (onInit)",description:"Update the onInit data object when new data is available. The onInit code will not execute again, it will only update the data object.",defaultValue:!1}).addBooleanSwitch({path:"dynamicFieldDisplayValues",name:"Dynamic fieldDisplayValues (onInit)",description:"Update the onInit fieldDisplayValues object when new data is available.",defaultValue:!1}).addBooleanSwitch({path:"dynamicProps",name:"Dynamic props (onInit)",description:"Update the onInit props object when new data is available.",defaultValue:!1}).addBooleanSwitch({path:"onInitOnResize",name:"Trigger onInit on resize",description:"Trigger the onInit code when the panels width/height changes.",defaultValue:!1}).addCustomEditor({id:"onInit",path:"onInit",name:"onInit",description:"The onInit code is executed when the panel loads (htmlNode, customProperties/codeData, data, options, theme, getTemplateSrv, getLocationSrv, htmlGraphics)",editor:bt,defaultValue:"// Sets the text from customProperties\nconst htmlgraphicsText = htmlNode.getElementById('htmlgraphics-text');\n\nif (htmlgraphicsText) {\n  htmlgraphicsText.textContent = customProperties.text;\n\n  // Change the text color based on the theme\n  if (theme.isDark) {\n    htmlgraphicsText.style.color = 'green';\n  } else {\n    htmlgraphicsText.style.color = 'red';\n  }\n}\n",settings:{language:e.Javascript,useHtmlGraphicsDeclarations:!0}}).addCustomEditor({id:"importedPanelOptions",path:"importedPanelOptions",name:"Panel options",description:"Easily copy all options to a panel which uses the HTMLGraphics panel (gapit-htmlgraphics-panel).",editor:kt,category:["Import/export"],settings:{language:e.Json}})}))})(),l})()));
//# sourceMappingURL=module.js.map